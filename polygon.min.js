"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var t="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self.self===self&&self||"object"==("undefined"==typeof global?"undefined":_typeof(global))&&global.global===global&&global;"function"==typeof define&&define.amd?define([],function(){t.Polygon=e()}):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e():t.Polygon=e()}(function(){var e=function(){function e(t){var r=this,a=t.edges,o=t.r,n=t.rotate,i=t.bg,s=t.axis,l=t.border,c=t.label;if(_classCallCheck(this,e),!a||"number"!=typeof a)throw new TypeError("edges must be an number");if(this._edges=a,this._r=o instanceof Array?o:new Array(a).fill(o),this._rotate=0,n&&"number"==typeof n){for(;n<0;)n+=360;this._rotate=n}this._bg=i&&(i instanceof Array?i:new Array(a).fill(i)),this._axis=s&&(s instanceof Array?s:new Array(a).fill(s)),this._border=l&&(l instanceof Array?l:new Array(a).fill(l)),this._label=c,this._vertices=[],this._r.forEach(function(e,t){var a=360*(t/r._edges)+r._rotate,o=Math.floor(a/90)%4,n=a%90*(Math.PI/180),i=0,s=0;switch(o){case 0:i=+e*Math.sin(n),s=-e*Math.cos(n);break;case 1:i=+e*Math.cos(n),s=+e*Math.sin(n);break;case 2:i=-e*Math.sin(n),s=+e*Math.cos(n);break;case 3:i=-e*Math.cos(n),s=-e*Math.sin(n)}var l=[i,s];l.quadrant=o,r._vertices.push(l)})}return _createClass(e,[{key:"render",value:function(e){var t,r=this,a=e.canvas,o=e.merge,n=void 0===o?[]:o,i=e.animation,s=void 0===i?-1:i,l=a.getContext("2d");l.clearRect(0,0,a.width,a.height),s>0&&!this._tick&&(this._tick=1,this._tick_end=s/(1e3/60));var c=1;if(this._tick&&(c=this._tick/this._tick_end),(t=[this]).concat.apply(t,_toConsumableArray(n)).forEach(function(e){e.draw(a,c)}),this._tick){if(this._tick++,!(this._tick>=this._tick_end))return requestAnimationFrame(function(){r.render({canvas:a,merge:n})});Reflect.deleteProperty(this,"_tick"),Reflect.deleteProperty(this,"_tick_end")}}},{key:"draw",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=e.getContext("2d");a.save(),a.translate(e.width/2-.5,e.height/2-.5),a.scale(r,r),this._vertices.forEach(function(e,r){var o=[t._vertices[r],t._vertices[r>=t._vertices.length-1?0:r+1]],n=o[0],i=o[1];if(t._bg&&(a.beginPath(),a.moveTo(0,0),a.lineTo.apply(a,_toConsumableArray(n)),a.lineTo.apply(a,_toConsumableArray(i)),a.closePath(),a.fillStyle=t._bg[r],a.fill()),t._axis&&(a.beginPath(),a.moveTo(0,0),a.lineTo.apply(a,_toConsumableArray(n)),a.lineWidth=.5,a.strokeStyle=t._axis[r],a.stroke()),t._border&&(a.beginPath(),a.moveTo.apply(a,_toConsumableArray(n)),a.lineTo.apply(a,_toConsumableArray(i)),a.lineWidth=1,a.strokeStyle=t._border[r],a.stroke()),t._label){var s=t._label[r]||{},l=s.text,c=s.size,f=void 0===c?20:c,h=s.color,u=void 0===h?"#000":h;if(!l)return;a.font=f+'px "Microsoft YaHei Mono", Arial',a.fillStyle=u;var y=[a.measureText(l).width,f],b=y[0],_=y[1],d=f/3,p=[].concat(_toConsumableArray(n)),v=p[0],m=p[1];switch(n.quadrant){case 0:var g=[Math.abs(v)<10?v-b/2:v+d,m-d];v=g[0],m=g[1];break;case 1:var k=[v+d,Math.abs(m)<10?m+_/2:m+d+_];v=k[0],m=k[1];break;case 2:var A=[Math.abs(v)<10?v-b/2:v-d-b,m+d+_];v=A[0],m=A[1];break;case 3:var C=[v-d-b,Math.abs(m)<10?m+_/2:m-d];v=C[0],m=C[1]}a.fillText(l,v,m)}}),a.restore()}}]),e}();return e});